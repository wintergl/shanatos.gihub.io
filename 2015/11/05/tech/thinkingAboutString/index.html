<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>从语言技巧(java-String)延伸的一些想法 | 韩帅-知行合一</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="关于语言的一些技巧在写JAVA的时候经常被提醒要注意string这个类的用法，这个类有许多奇技淫巧，比如直接使用+拼接字符串不被推荐，原因是拼接字符串会有性能上的一些问题，会产生大量的字符串对象。所以我们被推荐使用StringBuffer去拼接，或者最近提到的StringBuilder去拼接。每每用到这两个类，缩写往往是sb，这在中文词汇中，应该是要被和谐的词了。不过程序里面倒是经常用到这个。
这">
<meta property="og:type" content="article">
<meta property="og:title" content="从语言技巧(java-String)延伸的一些想法">
<meta property="og:url" content="http://shanatos.com/2015/11/05/tech/thinkingAboutString/index.html">
<meta property="og:site_name" content="韩帅-知行合一">
<meta property="og:description" content="关于语言的一些技巧在写JAVA的时候经常被提醒要注意string这个类的用法，这个类有许多奇技淫巧，比如直接使用+拼接字符串不被推荐，原因是拼接字符串会有性能上的一些问题，会产生大量的字符串对象。所以我们被推荐使用StringBuffer去拼接，或者最近提到的StringBuilder去拼接。每每用到这两个类，缩写往往是sb，这在中文词汇中，应该是要被和谐的词了。不过程序里面倒是经常用到这个。
这">
<meta property="og:updated_time" content="2015-11-16T02:30:57.323Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="从语言技巧(java-String)延伸的一些想法">
<meta name="twitter:description" content="关于语言的一些技巧在写JAVA的时候经常被提醒要注意string这个类的用法，这个类有许多奇技淫巧，比如直接使用+拼接字符串不被推荐，原因是拼接字符串会有性能上的一些问题，会产生大量的字符串对象。所以我们被推荐使用StringBuffer去拼接，或者最近提到的StringBuilder去拼接。每每用到这两个类，缩写往往是sb，这在中文词汇中，应该是要被和谐的词了。不过程序里面倒是经常用到这个。
这">
  
    <link rel="alternate" href="/atom.xml" title="韩帅-知行合一" type="application/atom+xml">
  
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css" integrity="sha384-XdYbMnZ/QjLh6iI4ogqCTaIjrFk87ip+ekIjefZch0Y+PvJ8CDYtEs1ipDmPorQ+" crossorigin="anonymous">

  <link rel="stylesheet" href="/css/styles.css" type="text/css">

  <script src="http://shanatos.com/js/jquery-2.2.3.min.js" integrity="sha384-8gBf6Y4YYq7Jx97PIqmTwLPin4hxIzQw5aDmUg/DDhul9fFpbbLcLh3nTIIDJKhx" crossorigin="anonymous"></script>
</head>

<body>
  <nav class="navbar navbar-inverse">
  <div class="container">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#main-menu-navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="main-menu-navbar">
      <ul class="nav navbar-nav">
        
          <li><a class=""
                 href="/index.html">首页</a></li>
        
          <li><a class=""
                 href="/archives/">归档文章</a></li>
        
      </ul>

      <!--
      <ul class="nav navbar-nav navbar-right">
        
          <li><a href="/atom.xml" title="RSS Feed"><i class="fa fa-rss"></i></a></li>
        
      </ul>
      -->
    </div><!-- /.navbar-collapse -->
  </div><!-- /.container-fluid -->
</nav>

  <div class="container">
    <div class="blog-header">
  <h1 class="blog-title">韩帅-知行合一</h1>
  
</div>

    <div class="row">
        <div class="col-sm-8 blog-main">
          <article id="post-tech/thinkingAboutString" class="article article-type-post" itemscope itemprop="blogPost">

  <header class="article-header">
    
  
    <h1 class="article-title" itemprop="name">
      从语言技巧(java-String)延伸的一些想法
    </h1>
  


  </header>

  <div class="article-meta">
    <div class="article-datetime">
  <a href="/2015/11/05/tech/thinkingAboutString/" class="article-date"><time datetime="2015-11-05T15:40:29.000Z" itemprop="datePublished">2015-11-05</time></a>
</div>

    
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/c/">技术</a>
  </div>


  </div>
  <div class="article-inner">

    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="关于语言的一些技巧">关于语言的一些技巧</h1><p>在写JAVA的时候经常被提醒要注意string这个类的用法，这个类有许多奇技淫巧，比如直接使用+拼接字符串不被推荐，原因是拼接字符串会有性能上的一些问题，会产生大量的字符串对象。所以我们被推荐使用StringBuffer去拼接，或者最近提到的StringBuilder去拼接。<br>每每用到这两个类，缩写往往是sb，这在中文词汇中，应该是要被和谐的词了。不过程序里面倒是经常用到这个。</p>
<h2 id="这样做有什么好处和坏处">这样做有什么好处和坏处</h2><p>在JAVA中，使用这种类的好处在于它可以产生尽可能少的String对象，从而提升性能。<br>但是，我觉得使用+去拼接字符串，尽管会产生一些冗余的对象，但是可读性上却大大加强了。比如你写一个拼接的字符串<code>a + &quot;b&quot; + c</code>和<code>StringBuilder temp = new StringBuilder();temp.append(a).append(&quot;b&quot;).append(c)</code>。很明显第一个的程序方式简洁明了，而使用所谓的高效率方法，却会带来程序阅读上的困扰。</p>
<h2 id="知道这个能给我带来什么">知道这个能给我带来什么</h2><p>当程序出现性能上面的问题的时候，我们使用这个技巧可以提升程序的性能。所以这个技巧仅仅在于当程序出现问题的时候，我们使用它，让程序跑得更加快速，更加健壮。<br>但是在程序没有性能的时候，我们更需要关注的是程序的可读性。只要程序没有说内存不足或是其他的，我们就应该认为程序的性能是足够的，不能为了程序的性能去抛弃程序的可读性。可读的代码是程序员最应该交付的代码。高性能的代码绝对不是第一次交付可以交付出来的，而是通过不断地进化进化而来的，这里的进化，指的是通过不断地测试，发现瓶颈，优化瓶颈的进化，而不是把所有的代码都写成高性能的代码。</p>
<h2 id="高性能的代码是不必要的么？">高性能的代码是不必要的么？</h2><p>当然不是，我们应该尽量养成写高性能代码的习惯，前提是这种代码习惯不会给程序的阅读带来困扰。否则，就先写可读性强的代码，然后再去优化。所有的代码必须先完成其功能，面对其变更，然后才会有高性能，高可用性的要求。我们在写代码的时候，却经常忽略前两点，过分追求代码的性能。实际上，功能的完成才是最最重要的事情。<br>高性能的代码比如在初始化一个长度为1的列表的时候，我们给列表一个初始长度，可以大大提升创建的速度和减少占用的空间<code>new ArrayList(1)</code>。这种代码写下来就不会产生任何的误解，但是需要注意的是，如果后续维护的人不知道，又向这个列表中添加了元素，变成一个长度为2的列表了，那性能反而会大大降低。</p>
<h2 id="再进一步">再进一步</h2><p>对于String的优化，我想过一个方案，我们目前的所有的写法，都是基于一个假设，就是假设虚拟机的实现是按照SUN的来实现的。但是，因为java是开源的，如果能修改这种初始的设定（前提是发现这种设定本身是不合理的），那是不是说我们可以放心大胆地去写String+String的这种代码呢？或者我们有代码优化器，将这种代码预先转换成我们指定的方式，是不是一步头解决了所有的问题？<br>其实也不是这样的，因为如果真正这样子改写了，对于一个公司的了解这件事情的java程序员来说，是更好的，但是对于外来的程序员，他们因为不了解这个历史，写出的代码仍然不会按照我们预计的样子去写的。<br>这让我想到以前的一个故事，具体不记得了，大意是这样的：有个木匠想做一块10×10的木料，因为这个木料有损耗，所以他算出了木料大概需要买12×12的木料,他就委托自己的一个木匠朋友帮他去买这个材料，这个木匠朋友想，做这个东西需要留2公分的预留，所以要买14×14的木料，于是给他买了14×14的木料回来。</p>
<h2 id="结论">结论</h2><p>写可读的代码，之后再考虑程序的性能问题。先完成功能，再着力优化，过早的优化会带来不少隐患， 这种隐患可能是我们难以预计的。善意的行为，也会造成误解和隐患，尊重大众的习惯，尽量写可读的代码。</p>

      
    </div>

    
      

    

    <footer class="article-footer">
      <a data-url="http://shanatos.com/2015/11/05/tech/thinkingAboutString/" data-id="cink9j7bx001adctsj3qoqjze" class="article-share-link">
        <i class="fa fa-share"></i> Share
      </a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/java/">java</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/技术总结/">技术总结</a></li></ul>


    </footer>
  </div>
  
    
<ul id="article-nav" class="nav nav-pills nav-justified">
  
  <li role="presentation">
    <a href="/2015/11/04/codes/前端/tabChange/" id="article-nav-older" class="article-nav-link-wrap">
      <i class="fa fa-chevron-left pull-left"></i>
      <span class="article-nav-link-title">参考代码-前端-标签切换</span>
    </a>
  </li>
  
  
  <li role="presentation">
    <a href="/2015/11/05/thinking/thinkOfAction/" id="article-nav-newer" class="article-nav-link-wrap">
      <span class="article-nav-link-title">搞博客的目的</span>
      <i class="fa fa-chevron-right pull-right"></i>
    </a>
  </li>
  
</ul>


  
</article>




        </div>
        
          <div class="col-sm-3 col-sm-offset-1 blog-sidebar">
            
  <div class="sidebar-module sidebar-module-inset">
  <h4>关于我</h4>
  <p>一个没有脱离低级趣味的人，一只程序猿，喜欢读书，喜欢玩游戏</p>

</div>


  
  <div class="sidebar-module">
    <h4>分类文章</h4>
    <ul class="sidebar-module-list"><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/categories/e/">参考</a><span class="sidebar-module-list-count">3</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/categories/思考/">思考</a><span class="sidebar-module-list-count">3</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/categories/c/">技术</a><span class="sidebar-module-list-count">3</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/categories/a/">生活</a><span class="sidebar-module-list-count">2</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/categories/d/">碎碎念</a><span class="sidebar-module-list-count">1</span></li></ul>
  </div>



  
  <div class="sidebar-module">
    <h4>标签</h4>
    <ul class="sidebar-module-list"><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/code/">code</a><span class="sidebar-module-list-count">2</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/css/">css</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/html/">html</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/java/">java</a><span class="sidebar-module-list-count">3</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/sublime/">sublime</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/tools/">tools</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/创新/">创新</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/工具/">工具</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/思考/">思考</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/技术总结/">技术总结</a><span class="sidebar-module-list-count">2</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/支付宝/">支付宝</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/编程/">编程</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/群论/">群论</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/逻辑层次/">逻辑层次</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/钢铁侠/">钢铁侠</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/问题分析/">问题分析</a><span class="sidebar-module-list-count">1</span></li></ul>
  </div>



  
  <div class="sidebar-module">
    <h4>标签云</h4>
    <p class="tagcloud">
      <a href="/tags/code/" style="font-size: 15px;">code</a> <a href="/tags/css/" style="font-size: 10px;">css</a> <a href="/tags/html/" style="font-size: 10px;">html</a> <a href="/tags/java/" style="font-size: 20px;">java</a> <a href="/tags/sublime/" style="font-size: 10px;">sublime</a> <a href="/tags/tools/" style="font-size: 10px;">tools</a> <a href="/tags/创新/" style="font-size: 10px;">创新</a> <a href="/tags/工具/" style="font-size: 10px;">工具</a> <a href="/tags/思考/" style="font-size: 10px;">思考</a> <a href="/tags/技术总结/" style="font-size: 15px;">技术总结</a> <a href="/tags/支付宝/" style="font-size: 10px;">支付宝</a> <a href="/tags/编程/" style="font-size: 10px;">编程</a> <a href="/tags/群论/" style="font-size: 10px;">群论</a> <a href="/tags/逻辑层次/" style="font-size: 10px;">逻辑层次</a> <a href="/tags/钢铁侠/" style="font-size: 10px;">钢铁侠</a> <a href="/tags/问题分析/" style="font-size: 10px;">问题分析</a>
    </p>
  </div>



  
  <div class="sidebar-module">
    <h4>归档文章</h4>
    <ul class="sidebar-module-list"><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2016/04/">四月 2016</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2016/03/">三月 2016</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2015/12/">十二月 2015</a><span class="sidebar-module-list-count">2</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2015/11/">十一月 2015</a><span class="sidebar-module-list-count">8</span></li></ul>
  </div>



  
  <div class="sidebar-module">
    <h4>最近文章</h4>
    <ul class="sidebar-module-list">
      
        <li>
          <a href="/2016/04/27/tech/信息系统问题排查/">信息系统问题排查</a>
        </li>
      
        <li>
          <a href="/2016/03/14/thinking/从《大众经济学》开始的思考/">从《大众经济学》开始的思考</a>
        </li>
      
        <li>
          <a href="/2015/12/25/thinking/从钢铁侠到支付宝/">从钢铁侠到支付宝</a>
        </li>
      
        <li>
          <a href="/2015/12/05/thinking/软件工程师的局限性/">软件工程师的局限性</a>
        </li>
      
        <li>
          <a href="/2015/11/18/thinking/mostImportantThingInPrograming/">编程最重要的是什么?</a>
        </li>
      
    </ul>
  </div>




          </div>
        
    </div>
  </div>
  <footer class="blog-footer">
  <div class="container">
    <div id="footer-info" class="inner">
      &copy; 2016 [object Object]<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

  

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>



<script src="/js/script.js" type="text/javascript"></script>

</body>
</html>
